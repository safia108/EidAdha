<!DOCTYPE html>
<html>
     <head>
        <img src="virgin_logo.png" alt="banner" width="10%" height="10%" >

        </head>
<body>

   
        <title>holiday card</title>

<h2  style="text-align: center; font-size: 70px;">Virgin Mobile wishes you a joyful and warm holiday </h2>
<h3 style="text-align: center; font-size: 50px;" >Happy Eid You Guys !!!</h3>
<br>

<h1 style="text-align: center;  font-size: 70px; ">Get your e-card</h1>

<div class = "Inputs">
 <form >
    <input type="text" id="fnameAR" name="fnameAR" placeholder="Enter Your Full Name" size="40"><br><br>
    <input type="text" id="positionAR" name="positionAR" placeholder="Enter Your Position" size="40"><br><br>
    </form>
</div>
<br>
<br>
<br>
  <div class="center">
    <div id="parent">

        <canvas id="captcha" width="70" height="50"  >captcha text</canvas>
        <button id="refreshButton" type="submit" style="font-size: 45px;">&nbsp;&#x21bb;</button>

<!-- (A) EMPTY CANVAS -->

<canvas id="canvas" width="400" height="150"></canvas>

</div>


        <input id="textBox" type="text" name="text" size="25px" >
        <div id="buttons">
        <a id="submitButton" href="#" download="e-card.png" style="font-size: 30px;" >Download</a>
        </div>
        <span id="output"></span>
</div>
<!--<footer>&copy;2023 <a href="https://www.z1f1.com/">Z1f1.com</a>- All rights reserved.</footer>-->
</body>

</html>
<style>
body {
    background-color: white;
    font-family: 'Roboto', sans-serif;
    align-items: center;
    }

input {
    border-radius: 5px;
    height: 35px;
    width: 500px;
}




form {
  text-align: center;
}


 

#parent {

    display:inline-flex;
    height: 150px;
    width: 250px;

}

#captcha {
    font-size: 90px;
    letter-spacing: 2px;
    width: 150px;
    
}


.center {
    display: flex;
    flex-direction: column;
    align-items: center;
}

#submitButton {
    margin-top: 2em;
    margin-bottom: 2em;
    background-color: red;
    border: 0px;
    font-weight: bold;
    padding: 4px;
    padding-left: 20px;
    padding-right: 20px;
    color: white;
    width: 250px;
    height: 70px;
}

#refreshButton {
    font-size: 20px;
    height: 100px;
    border: 0px;
    font-weight: bold;
    background-color: white;
}



#textBox {
    height: 35px;
}

.incorrectCaptcha {
    color: #FF0000;
}

.correctCaptcha {
    color: #376703;
}
input::placeholder {
    font: 1.5rem/3 sans-serif;
}
footer {
position: absolute;
bottom: 0;
width: 100%;
height: 30px;
align-self: center;
}
</style>

<script>

let captchaText = document.querySelector('#captcha');
var ctx = captchaText.getContext("2d");
ctx.font = "20px Roboto";
ctx.fillStyle = "#FF0000";


let userText = document.querySelector('#textBox');
let submitButton = document.querySelector('#submitButton');
let output = document.querySelector('#output');
let refreshButton = document.querySelector('#refreshButton');

const canvas = document.getElementById('canvas');
const ctxx = canvas.getContext('2d');
 let img = new Image("EidAdha/VMKSA-Eid-AlAdha.png");

let alphaNums = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];
let emptyArr = [];


for (let i = 1; i <= 4; i++) {
    emptyArr.push(alphaNums[Math.floor(Math.random() * alphaNums.length)]);
}
var c = emptyArr.join('');
ctx.fillText(emptyArr.join(''),captchaText.width/4, captchaText.height/2);



// userText.addEventListener('keyup', function(e) {
//     if (e.keyCode === 13) {
//         if (userText.value === c) {
//            var uname = document.getElementById("fnameAR").value;
//            var pname = document.getElementById("positionAR").value;

//            localStorage.setItem("Username",uname);
//            localStorage.setItem("postion" , pname);
           
//         } else {
//             output.classList.add("incorrectCaptcha");
//             output.innerHTML = "Incorrect, please try again";
//         }
//     }
// });



submitButton.addEventListener('click', function() {
    if (userText.value === c) {
        var uname = document.getElementById("fnameAR").value;
        var pname = document.getElementById("positionAR").value;

        
              ctxx.drawImage(img,0,0);
              ctxx.font = '50px serif';
              ctxx.fillText(uname +" \n"+ pname, 50, 90);
              const pngURl = canvas.toDataURL("image/png");
              console.log(pngURl);
              canvasDownlaod.href=pngURl;

            

    } else {
        output.classList.add("incorrectCaptcha");
        output.innerHTML = "Incorrect, please try again";
    }
});

function pageRedirect() {
            window.location.href = "Eid-photo.html";
        } 
refreshButton.addEventListener('click', function() {
    userText.value = "";
    let refreshArr = [];
    for (let j = 1; j <= 4; j++) {
        refreshArr.push(alphaNums[Math.floor(Math.random() * alphaNums.length)]);
    }
    ctx.clearRect(0, 0, captchaText.width, captchaText.height);
    c = refreshArr.join('');
    ctx.fillText(refreshArr.join(''),captchaText.width/4, captchaText.height/2);
    output.innerHTML = "";
});

function download(filename, url) {
            var element = document.createElement('a');
            element.setAttribute('href', url);
            element.setAttribute('download', filename);
            document.body.appendChild(element);
            element.click();
             //remove the hidden link 
            //document.body.removeChild(element);
            }

           function onclickhandler(e) {
                var name =  e.files[0].name;
                var file =  e.files[0];
                var blob = new Blob([file]);
                var url  = URL.createObjectURL(blob);
                download(name,url);
            }

            
        
</script>
